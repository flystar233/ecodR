% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.R
\name{feature_contributions}
\alias{feature_contributions}
\title{Get Feature Contributions for a Sample}
\usage{
feature_contributions(object, sample_id, as_dataframe = TRUE)
}
\arguments{
\item{object}{An ecod object.}

\item{sample_id}{Integer or numeric. Index of the sample to analyze.}

\item{as_dataframe}{Logical. If TRUE (default), returns a data frame with
feature names, tail probabilities, and contributions. If FALSE, returns
a named numeric vector of contributions only (for backward compatibility).}
}
\value{
If as_dataframe=TRUE, a data frame with columns:
\item{feature}{Feature name}
\item{tail_probability}{Tail probability (closer to 0 = more extreme)}
\item{contribution}{Contribution score (-log of tail probability)}

If as_dataframe=FALSE, a named numeric vector of contributions,
sorted in decreasing order.
}
\description{
Computes the contribution of each feature to a sample's anomaly score,
along with the tail probabilities.
}
\examples{
model <- ecod(iris[, 1:4])

# Get contributions as data frame (default)
most_anomalous <- which.max(model$scores)
contributions <- feature_contributions(model, most_anomalous)
print(contributions)

# Get as vector (old behavior)
contrib_vector <- feature_contributions(model, most_anomalous,
                                        as_dataframe = FALSE)

# Visualize
barplot(contributions$contribution,
        names.arg = contributions$feature,
        las = 2, col = "steelblue",
        main = paste("Feature Contributions - Sample", most_anomalous))

}

